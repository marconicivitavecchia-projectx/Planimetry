<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="style.css">
  <!--bootstrap link-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!--TITLE-->
  <title>Dromotix - Devices</title>


  <script src="jquery-3.3.1.min.js"></script>
  <script src="appFloor.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


  <script>

  window.onload = function() {

    document.getElementById('edit').onclick = function(){
      window.location = "edit_floor.html";
    }
    document.getElementById('addfloor').onclick = function(){
      var $original = document.getElementById('defaultfloor');
      var clone = $original.cloneNode(true);
      var par =  clone.querySelector('p');
      par.parentNode.removeChild(par);
      $(clone).find("button").css("visibility","visible");
      clone.removeAttribute('id');
      $('#floors').append(clone);
      // TO-DO createElement e poi appendChild al div Preview

    }

    //onclick of the pen icon the user can rename the floor
    $(document).delegate(".renamefloor", 'click', function() {
      $(this).parents('div.floor').find(".floorname").removeAttr("disabled");
      $(this).parents('div.floor').find(".floorname").css("-webkit-appearance", "textfield");
      $(this).css("pointer-events", "none");
      $(this).css("color","grey");
      $(this).parents('div.floor').find(".savefloor").css("pointer-events", "auto");
      $(this).parents('div.floor').find(".savefloor").css("color","");
    });

    //onclick of the pen save the user can save the name of the floor
    $(document).delegate(".savefloor", 'click', function() {
      $(this).parents('div.floor').find(".floorname").attr("disabled", "true");
      $(this).parents('div.floor').find(".floorname").css("-webkit-appearance", "none");
      $(this).css("pointer-events", "none");
      $(this).css("color","grey");
      $(this).parents('div.floor').find(".renamefloor").css("pointer-events", "auto");
      $(this).parents('div.floor').find(".renamefloor").css("color","");
      $(this).css("color","");
    });

    // onclick REMOVE the user can select the floor to remove
    $(document).delegate(".floor",'click',function(){
      if($(this).hasClass('selected')){
        $(this).removeClass('selected');
      }else{
        $(this).parents('div.section').find("div.selected").removeClass('selected');
        $(this).addClass('selected');
      }
    });
    document.getElementById('removefloor').onclick = function(){
      $(this).parents('div.section').find("div.selected").remove();
    }


  }


  </script>

</head>
<body>
  <header>
    <h1><b>Mapping and management of devices</b></h1>
    <!-- TO-DO on click of this button the page with the selected floor in preview will be opened-->
    <button type="button" class="btn btn-light" id="edit">Edit floor</button>
  </header>
<div class="corp">
  <div class="section">
    <div id="defaultfloor" class="floor">
      <!--name of the floor-->
      <p>Floor</p>
      <input type="text" maxlength="15" class="floorname" placeholder="Floor" disabled>
      <!--on click of this button with the icon, the user can rename the floor-->
      <button type="button" class="renamefloor">
        <span><img src="../images/icons/icon_edit.svg"></span>
      </button>
      <!--on click of this button with the icon, the user can save the floor's name-->
      <button type="button" class="savefloor" style="pointer-events: none">
        <span><img src="../images/icons/icon_save.svg"></span>
      </button>
    </div>
    <div id="floors">
      
    </div>
    <div class="buttons">
      <!--on click of this button the default floor will be cloned-->
      <button type="button" class="btn btn-light" id="addfloor">Add</button>
      <!-- TO-DO on click of this button the user can select the floor he wants to remove-->
      <button type="button" class="btn btn-light" id="removefloor">Remove</button>
</div>
  </div>
  <div class="container">
    <h3>Floors' plans</h3>
    <div id="previews">
      <!-- TO-DO in this div there will be shown all the previews of the floors with their devices-->
   
        
    </div>
    </div>
  </div>
</div>


<!--bootstrap link-->
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

 </body>
</html>
