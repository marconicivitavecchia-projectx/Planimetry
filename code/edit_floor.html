<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <!--link to css style-->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="editing_style.css">
    
    <!--TITLE-->
    <title>Dromotix - Devices on the floor</title>
    <!--jquery libraries-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    
    <script>
     window.onload = function() {
        
           document.getElementById('cancel').onclick = function(){
               window.location = "index.html";
           }
            document.getElementById('addroom').onclick = function(){
                var $original = document.getElementById('defaultroom');
                var $clone = $original.cloneNode(true);
              // TO-DO remove hidden on buttons
                $clone.removeAttribute('id');           
                $original.after($clone); 
            // TO-DO createElement e poi appendChild al div Preview
            
            } 
       
           $(document).delegate(".renameroom", 'click', function() {
                $(this).parents('div.room').find(".roomname").attr("contenteditable", "true");
                $(this).parents('div.room').find(".roomname").css("-webkit-appearance", "textfield");
                $(this).css("pointer-events", "none");
                $(this).css("color","grey");
                $(this).parents('div.room').find(".saveroom").css("pointer-events", "auto");
                $(this).parents('div.room').find(".saveroom").css("color","");
            });
            
            $(document).delegate(".saveroom", 'click', function() {
                $(this).parents('div.room').find(".roomname").attr("contenteditable", "false");
                $(this).parents('div.room').find(".roomname").css("-webkit-appearance", "none");
                $(this).css("pointer-events", "none");
                $(this).css("color","grey");
                $(this).parents('div.room').find(".renameroom").css("pointer-events", "auto");
                $(this).parents('div.room').find(".renameroom").css("color","");
                $(this).css("color","");
            });
         
            $(document).delegate(".devroom", 'click', function() {
                var div = $(this).parents('div.room').find(".devices");
                if (div.css('display') === "none") {
                    div.css("display","block");
                } else {
                    div.css("display","none");
                }
                
            });
            
         // onclick REMOVE the usec can select the room to remove
        $(document).delegate(".room",'click',function(){
               if($(this).hasClass('selected')){
                   $(this).removeClass('selected');
               }else{
                   $(this).parents('div.section').find("div.selected").removeClass('selected');
                   $(this).addClass('selected');
               }
           });
         document.getElementById('removeroom').onclick = function(){
             $(this).parents('div.section').find("div.selected").remove();
         }
        
        }
    
    
    </script>
    
    
</head>
<body>
    <header>
        <h1><b>Management of devices on the floor</b></h1>
        <!-- TO-DO on click of this button the structure of the piano will be saved-->
        <button id="save"><b>Save</b></button>
        <!-- TO-DO on click of this button the changes of the piano will be discarded-->
        <button id="cancel"><b>Cancel</b></button>
    </header>

    <div class="section">
        <div id="defaultroom" class="room"> 
            <!--name of the room-->
            <p class="roomname">Room</p>
            <!--on click of this button with the icon, the user can rename the room-->
            <button type="button" class="renameroom">
                <span><i class="fas fa-pen"></i></span>
            </button>
            <!--on click of this button with the icon, the user can save the room's name-->
            <button type="button" class="saveroom" style="pointer-events: none">
                <span><i class="fas fa-save"></i></span>
            </button>
            <!--on click of this button with the icon, the user can view a list of the devices in the room-->
            <button type="button" class="devroom">
                <span><i class="fas fa-chevron-circle-down"></i></span>
            </button>
            <!--hidden div that on click shows the list of the devices-->
            <div class="devices">
                <!--this list must be only in the cloned div and it will be dinamic because it will show the devices of the named room-->
                <ul>
                    <li>Device 1</li>
                    <li>Device 2</li>
                    <li>...</li>
                </ul>
            </div>
        </div>
        
        <div id="buttons">
            <!--on click of this button the default room will be cloned-->
            <button id="addroom">Add</button>
            <!-- TO-DO on click of this button the user can select the room he wants to remove-->
            <button id="removeroom">Remove</button>
        </div>
        
    </div>
    <div class="container">
        <h3>Preview</h3>
        <div>
            <!-- TO-DO in this div there will be shown the preview of the room with its devices in each room-->
            <div class="preview">
                <div id="defaultpreview"></div>
            </div>
        </div>
    </div>
</body>
</html>